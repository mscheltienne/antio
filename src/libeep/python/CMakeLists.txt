message("Python3_EXECUTABLE..... ${Python3_EXECUTABLE}")
# manylinux don't contain Development, use Development.Module or Development.SABIModule:
# https://github.com/pybind/pybind11/pull/2689/files
find_package(Python3 REQUIRED COMPONENTS Interpreter Development.SABIModule)
message("python 3 include...... ${Python3_INCLUDE_DIRS}")
message("numpy include...... ${Python3_SITELIB}/numpy/core/include")
message("python 3 abi3 lib..... ${Python3_SABI_LIBRARIES}")
set(Python_SOABI "abi3")
include_directories(SYSTEM
  ${Python3_SITELIB}/numpy/core/include
)
Python3_add_library(pyeep3 MODULE ./pyeep.c USE_SABI 3.9 WITH_SOABI)
set_target_properties(pyeep3 PROPERTIES OUTPUT_NAME pyeep)
target_link_libraries(pyeep3 PRIVATE EepStatic)
install(TARGETS pyeep3 DESTINATION share/libeep/python3/libeep)

if(UNIX)
  set_target_properties(pyeep3 PROPERTIES PREFIX "")
endif()
if(WIN32)
  set_target_properties(pyeep3 PROPERTIES SUFFIX .pyd)
endif()
